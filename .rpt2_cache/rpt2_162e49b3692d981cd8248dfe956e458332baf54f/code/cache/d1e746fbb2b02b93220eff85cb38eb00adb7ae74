{"code":"// Copyright 2017-2019 @polkadot/api-derive authors & contributors\r\n// This software may be modified and distributed under the terms\r\n// of the Apache-2.0 license. See the LICENSE file for details.\r\nimport { of } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { drr } from '../util/drr';\r\nimport { referendumInfos } from './referendumInfos';\r\nexport function referendums(api) {\r\n    return () => api.queryMulti([\r\n        api.query.democracy.nextTally,\r\n        api.query.democracy.referendumCount\r\n    ]).pipe(switchMap(([nextTally, referendumCount]) => referendumCount && nextTally && referendumCount.gt(nextTally) && referendumCount.gtn(0)\r\n        ? referendumInfos(api)([...Array(referendumCount.sub(nextTally).toNumber())].map((_, i) => nextTally.addn(i)))\r\n        : of([])), drr());\r\n}\r\n","references":["/Users/jacogreeff/Projects/polkadot/api/packages/types/src/interfaces/democracy/index.ts","/Users/jacogreeff/Projects/polkadot/api/node_modules/@types/bn.js/index.d.ts","/Users/jacogreeff/Projects/polkadot/api/node_modules/rxjs/index.d.ts","/Users/jacogreeff/Projects/polkadot/api/node_modules/rxjs/operators/index.d.ts","/Users/jacogreeff/Projects/polkadot/api/packages/api/src/types.ts","/Users/jacogreeff/Projects/polkadot/api/packages/types/src/index.ts","/Users/jacogreeff/Projects/polkadot/api/packages/api-derive/src/type/index.ts","/Users/jacogreeff/Projects/polkadot/api/packages/api-derive/src/util/drr.ts","/Users/jacogreeff/Projects/polkadot/api/packages/api-derive/src/democracy/referendumInfos.ts"],"dts":{"name":"/Users/jacogreeff/Projects/polkadot/api/api-derive/src/democracy/referendums.d.ts","writeByteOrderMark":false,"text":"import { Observable } from 'rxjs';\r\nimport { ApiInterfaceRx } from '@polkadot/api/types';\r\nimport { Option } from '@polkadot/types';\r\nimport { ReferendumInfoExtended } from '../type';\r\nexport declare function referendums(api: ApiInterfaceRx): () => Observable<Option<ReferendumInfoExtended>[]>;\r\n"}}
